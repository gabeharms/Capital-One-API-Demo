<h3><%= params[:success] %></h3>
<br /><br />
<h1>C1 Webapp API</h1>
<form id="testForm">
Customer ID:<br>
<input type="text" name="customer_id">
<br>
Title:<br>
<input type="text" name="title"><br />
Category ID:<br>
<input type="text" name="ticket_category_id"><br />
Status ID of Ticket:<br>
<input type="text" name="ticket_status_id"><br />
<input type="hidden" name="sender_url" value="Norway" id="sender_url">
</form>

<button id="target" >Click me</button>
<script>
    var elem = document.getElementById("sender_url");
    web_url = String( window.location) //.substring(0, window.location.search("?"));
    var index = web_url.indexOf("?");
    web_url = web_url.substring(0, index);
    elem.value = web_url;
</script>
<script>
//$("#testForm").submit(function(event) { 
$("#target").click(function(event) {
    
    $.ajax({
    type: "POST",
    url: "https://shielded-lowlands-8250.herokuapp.com/update",
    // The key needs to match your method's input parameter (case-sensitive).
    data: JSON.stringify($('form').serializeObject()),
    dataType: "json",
    contentType: "application/json; charset=utf-8",

    });
});
    
    
$.fn.serializeObject = function()
{
    var o = {};
    var a = this.serializeArray();
    $.each(a, function() {
        if (o[this.name] !== undefined) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        } else {
            o[this.name] = this.value || '';
        }
    });
    return o;
};

</script>

<div>
<br />
<%= params[:status] %>
</div>